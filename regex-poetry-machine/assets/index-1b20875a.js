(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const t of n)if(t.type==="childList")for(const l of t.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function r(n){const t={};return n.integrity&&(t.integrity=n.integrity),n.referrerPolicy&&(t.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?t.credentials="include":n.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function o(n){if(n.ep)return;n.ep=!0;const t=r(n);fetch(n.href,t)}})();function m(e,a=!1){if(e.length===0)return"";if(e.length===1||e.length>1&&e.every(t=>t===e[0]))return e[0];const r=e.filter(t=>t!=="");return r.length===e.length-1?`(${r.join("|")})?`:a?`(${e.join("|")})`:e.join("|")}function P(e,a=!0){if(e.length===0)return"";if(e.length===1||e.length>1&&e.every(c=>c===e[0]))return e[0];const r=b(e),o=e.map(c=>p(c,Array.from(r).length));if(o.every(c=>Array.from(c).length===1))return a?r+`[${o.join("")}]`:r+`(${o.join("|")})`;const t=o.filter(c=>c!=="");return t.length===1?Array.from(t[0]).length===1?r+`${t[0]}?`:r+`(${t[0]})?`:r?t.length===o.length-1?r+`(${t.join("|")})?`:r+`(${o.join("|")})`:m(e)}function b(e){const a=e.toSorted((n,t)=>Array.from(n).length-Array.from(t).length);let r="";const o=Array.from(a[0]);for(let n=0;n<o.length;n++){const t=o[n];for(let l=1;l<a.length;l++){const c=Array.from(a[l])[n];if(c!==void 0&&t!==c)return r}r+=t}return r}function T(e,a=!0){if(e.length===0)return"";if(e.length===1||e.length>1&&e.every(c=>c===e[0]))return e[0];const r=k(e),o=e.map(c=>p(c,0,Array.from(c).length-Array.from(r).length));if(o.every(c=>Array.from(c).length===1))return a?`[${o.join("")}]`+r:`(${o.join("|")})`+r;const t=o.filter(c=>c!=="");return t.length===1?Array.from(t[0]).length===1?`${t[0]}?`+r:`(${t[0]})`+r:r?`(${o.join("|")})`+r:m(o)}function k(e){const a=e.toSorted((n,t)=>Array.from(n).length-Array.from(t).length);let r="";const o=Array.from(a[0]);for(let n=0;n<o.length;n++){const t=o[o.length-1-n];for(let l=1;l<a.length;l++){const u=Array.from(a[l]),c=u[u.length-1-n];if(c!==void 0&&t!==c)return r}r=t+r}return r}function q(e,a=!0,r=!1){if(e.length===0)return"";if(e.length===1||e.length>1&&e.every(s=>s===e[0]))return e[0];const o=b(e),n=k(e),t=e.map(s=>p(s,Array.from(o).length,Array.from(s).length-Array.from(n).length));if(t.every(s=>Array.from(s).length===1))return a?o+`[${t.join("")}]`+n:o+`(${t.join("|")})`+n;const u=t.filter(s=>s!=="");return u.length===1?Array.from(u[0]).length===1?o+`${u[0]}?`+n:o+`(${u[0]})?`+n:o||n?u.length===t.length-1?o+`(${u.join("|")})?`+n:o+`(${t.join("|")})`+n:m(e,r)}function H(e,a=!0){if(e.length===0)return"";if(e.length===1||e.length>1&&e.every(i=>i===e[0]))return e[0];const{string:r,positions:o}=I(e);if(console.log(r,o),!r)return m(e);const n=e.map((i,s)=>p(i,0,o[s])),t=e.map((i,s)=>p(i,o[s]+Array.from(r).length,Array.from(i).length));let l="";n.filter(i=>i!=="").length>0&&(l=q(n,a,!0));let u="";return t.filter(i=>i!=="").length>0&&(u=q(t,a,!0)),l+r+u}function I(e){const a=e.toSorted((n,t)=>Array.from(n).length-Array.from(t).length),r=a.map(n=>e.indexOf(n)),o=Array.from(a[0]);for(let n=o.length;n>0;n--)for(let t=0;t<=o.length-n;t++){const l=p(a[0],t,t+n);let u=!0;const c=Array(a.length).fill(0);c[r[0]]=t;for(let i=1;i<a.length;i++){const s=a[i].indexOf(l);s===-1?u=!1:c[r[i]]=s}if(u)return{string:l,positions:c}}return{string:"",positions:e.map(()=>-1)}}function p(e,a,r){return Array.from(e).slice(a,r).join("")}const C=document.querySelector(".saved-entry");C.remove();const O=document.querySelector(".example-entry");O.remove();const x=document.querySelector(".remove-input-button");x.remove();const j=[{strings:["poetry","pottery"],pattern:"po(et|tte)ry",preferBrackets:!0},{strings:["bookmaking","bookmarking"],pattern:"bookmar?king",preferBrackets:!0},{strings:["heart","hope"],pattern:"h(eart|ope)",preferBrackets:!0},{strings:["words","worlds"],pattern:"worl?ds",preferBrackets:!0},{strings:["cloud","cling"],pattern:"c(loud|ing)",preferBrackets:!0},{strings:["honeydew","drizzle"],pattern:"(honey)?d(ew|rizzle)",preferBrackets:!0},{strings:["heart","hearth"],pattern:"hearth?",preferBrackets:!0},{strings:["ðŸ’—ðŸ’œðŸ’™","ðŸ’—ðŸ’›ðŸ’™"],pattern:"ðŸ’—(ðŸ’œ|ðŸ’›)ðŸ’™",preferBrackets:!0}],w=document.querySelector(".examples-list");j.forEach(e=>{const{strings:a,pattern:r,preferBrackets:o}=e,n=O.cloneNode(!0),t=n.querySelector(".entry-strings");a.forEach(c=>{const i=document.createElement("div");i.classList.add("saved-string"),i.textContent=c,t.appendChild(i)});const l=n.querySelector(".entry-pattern");l.textContent=r,n.querySelector(".load-button").addEventListener("click",()=>$(r,a,o)),w.appendChild(n)});const N=document.querySelector(".output"),y=N.querySelector(".patterns"),L=document.querySelector(".swap-button");L.addEventListener("click",()=>{const e=Array.from(document.querySelectorAll(".string-input")),a=e.map(r=>r.value);a.length>=2&&(e[1].value=a[0],e[0].value=a[1]),y.classList.contains("hidden")||g()});const z=document.querySelector(".add-button");z.addEventListener("click",()=>M());const _=document.querySelector(".clear-input-button");_.addEventListener("click",F);function M(){const e=document.querySelectorAll(".string-input-container"),a=document.querySelector(".string-input-container").cloneNode(!0),r=e.length+1,o=document.querySelector("button[type='submit']");o.innerHTML="Make a match set";const n=a.querySelector("label");n.setAttribute("for",`string${r}`),n.innerHTML=`String ${r}`;const t=a.querySelector("input");t.setAttribute("name",`string${r}`),t.setAttribute("id",`string${r}`),t.value="";const l=x.cloneNode(!0);return a.appendChild(l),l.addEventListener("click",()=>{a.remove();const u=document.querySelectorAll(".string-input-container");o.innerHTML=u.length>2?"Make a match set":"Make a match pair",L.classList.toggle("hidden",u.length!==2)}),e[e.length-1].insertAdjacentElement("afterend",a),L.classList.toggle("hidden",e.length+1!==2),a}function F(){document.querySelectorAll(".string-input").forEach(a=>a.value=""),y.classList.add("hidden")}const R=document.querySelectorAll("input[name='group']");R.forEach(e=>e.addEventListener("input",()=>{y.classList.contains("hidden")||g()}));const B=document.querySelector(".input-form");B.addEventListener("submit",e=>{e.preventDefault(),g()});const D=document.querySelectorAll(".save-button");D.forEach(e=>e.addEventListener("click",()=>{const a=e.closest(".pattern").querySelector("dd").textContent,r=Array.from(document.querySelectorAll(".string-input")).map(n=>n.value).filter(n=>n!==""),o=B.group.value==="brackets";V(a,r,o)}));const K=document.querySelector(".copy-button");K.addEventListener("click",X);const U=document.querySelector(".clear-saved-button");U.addEventListener("click",Y);function g(e,a){y.classList.remove("hidden");const r=Array.from(document.querySelectorAll(".string-input")),o=Array.from(new Set(r.map(h=>h.value).filter(h=>h!=="")));if(a!==void 0){const h=document.querySelector(`#group--${a?"brackets":"parentheses"}`);h.checked=!0}const n=B.group.value==="brackets",t=[],l=H(o,n);t.push(l);const c=document.querySelector("#pattern--middle").querySelector("dd");c.innerHTML=l,l.length>15?c.style.fontSize=`${l.length/12}rem`:c.style.removeProperty("font-size");const i=m(o),s=document.querySelector("#pattern--alternation");t.includes(i)?s.classList.add("duplicate"):(s.classList.remove("duplicate"),t.push(i)),s.querySelector("dd").innerHTML=i;const d=q(o,n),f=document.querySelector("#pattern--begin-end");t.includes(d)?f.classList.add("duplicate"):(f.classList.remove("duplicate"),t.push(d)),f.querySelector("dd").innerHTML=d;const S=P(o,n),v=document.querySelector("#pattern--begin");t.includes(S)?v.classList.add("duplicate"):(v.classList.remove("duplicate"),t.push(S)),v.querySelector("dd").innerHTML=S;const A=T(o,n),E=document.querySelector("#pattern--end");t.includes(A)?E.classList.add("duplicate"):(E.classList.remove("duplicate"),t.push(A)),E.querySelector("dd").innerHTML=A}function V(e,a,r){const o=document.querySelector(".saved");o.classList.remove("hidden");const n=o.querySelector(".saved-list"),t=C.cloneNode(!0);t.setAttribute("data-group",r?"brackets":"parentheses"),n.appendChild(t);const l=t.querySelector(".entry-strings");a.forEach(s=>{const d=document.createElement("div");d.classList.add("saved-string"),d.innerHTML=s,l.appendChild(d)});const u=t.querySelector(".entry-pattern");u.innerHTML=e,t.querySelector(".load-button").addEventListener("click",()=>$(e,a,r)),t.querySelector(".remove-entry-button").addEventListener("click",()=>t.remove())}function $(e,a,r){const o=Array.from(document.querySelectorAll(".string-input-container"));if(o.length<a.length)for(let n=0;n<a.length-o.length;n++){const t=M();o.push(t)}else if(o.length>a.length)for(let n=o.length-1;n>a.length-1;n--)o[n].remove();for(let n=0;n<o.length;n++){const t=o[n].querySelector(".string-input");t.value=a[n]}g(e,r)}async function X(){const a=Array.from(document.querySelectorAll(".entry-pattern")).map(r=>r.textContent).join(`
`);try{await navigator.clipboard.writeText(a),console.log("Copied to clipboard:",a)}catch(r){console.error("Couldn't copy text:",r)}}function Y(){const e=document.querySelector(".saved-list");e.innerHTML=""}
