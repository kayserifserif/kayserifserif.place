(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const t of n)if(t.type==="childList")for(const l of t.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function r(n){const t={};return n.integrity&&(t.integrity=n.integrity),n.referrerPolicy&&(t.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?t.credentials="include":n.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function o(n){if(n.ep)return;n.ep=!0;const t=r(n);fetch(n.href,t)}})();function m(e,a=!1){if(e.length===0)return"";if(e.length===1||e.length>1&&e.every(t=>t===e[0]))return e[0];const r=e.filter(t=>t!=="");return r.length===e.length-1?`(${r.join("|")})?`:a?`(${e.join("|")})`:e.join("|")}function x(e,a=!0){if(e.length===0)return"";if(e.length===1||e.length>1&&e.every(c=>c===e[0]))return e[0];const r=L(e),o=e.map(c=>p(c,Array.from(r).length));if(o.every(c=>Array.from(c).length===1))return a?r+`[${o.join("")}]`:r+`(${o.join("|")})`;const t=o.filter(c=>c!=="");return t.length===1?Array.from(t[0]).length===1?r+`${t[0]}?`:r+`(${t[0]})?`:r?t.length===o.length-1?r+`(${t.join("|")})?`:r+`(${o.join("|")})`:m(e)}function L(e){const a=e.toSorted((n,t)=>Array.from(n).length-Array.from(t).length);let r="";const o=Array.from(a[0]);for(let n=0;n<o.length;n++){const t=o[n];for(let l=1;l<a.length;l++){const c=Array.from(a[l])[n];if(c!==void 0&&t!==c)return r}r+=t}return r}function M(e,a=!0){if(e.length===0)return"";if(e.length===1||e.length>1&&e.every(c=>c===e[0]))return e[0];const r=b(e),o=e.map(c=>p(c,0,Array.from(c).length-Array.from(r).length));if(o.every(c=>Array.from(c).length===1))return a?`[${o.join("")}]`+r:`(${o.join("|")})`+r;const t=o.filter(c=>c!=="");return t.length===1?Array.from(t[0]).length===1?`${t[0]}?`+r:`(${t[0]})`+r:r?`(${o.join("|")})`+r:m(o)}function b(e){const a=e.toSorted((n,t)=>Array.from(n).length-Array.from(t).length);let r="";const o=Array.from(a[0]);for(let n=0;n<o.length;n++){const t=o[o.length-1-n];for(let l=1;l<a.length;l++){const u=Array.from(a[l]),c=u[u.length-1-n];if(c!==void 0&&t!==c)return r}r=t+r}return r}function A(e,a=!0,r=!1){if(e.length===0)return"";if(e.length===1||e.length>1&&e.every(s=>s===e[0]))return e[0];const o=L(e),n=b(e),t=e.map(s=>p(s,Array.from(o).length,Array.from(s).length-Array.from(n).length));if(t.every(s=>Array.from(s).length===1))return a?o+`[${t.join("")}]`+n:o+`(${t.join("|")})`+n;const u=t.filter(s=>s!=="");return u.length===1?Array.from(u[0]).length===1?o+`${u[0]}?`+n:o+`(${u[0]})?`+n:o||n?u.length===t.length-1?o+`(${u.join("|")})?`+n:o+`(${t.join("|")})`+n:m(e,r)}function $(e,a=!0){if(e.length===0)return"";if(e.length===1||e.length>1&&e.every(i=>i===e[0]))return e[0];const{string:r,positions:o}=P(e);if(console.log(r,o),!r)return m(e);const n=e.map((i,s)=>p(i,0,o[s])),t=e.map((i,s)=>p(i,o[s]+Array.from(r).length,Array.from(i).length));let l="";n.filter(i=>i!=="").length>0&&(l=A(n,a,!0));let u="";return t.filter(i=>i!=="").length>0&&(u=A(t,a,!0)),l+r+u}function P(e){const a=e.toSorted((n,t)=>Array.from(n).length-Array.from(t).length),r=a.map(n=>e.indexOf(n)),o=Array.from(a[0]);for(let n=o.length;n>0;n--)for(let t=0;t<=o.length-n;t++){const l=p(a[0],t,t+n);let u=!0;const c=Array(a.length).fill(0);c[r[0]]=t;for(let i=1;i<a.length;i++){const s=a[i].indexOf(l);s===-1?u=!1:c[r[i]]=s}if(u)return{string:l,positions:c}}return{string:"",positions:e.map(()=>-1)}}function p(e,a,r){return Array.from(e).slice(a,r).join("")}const B=document.querySelector(".saved-entry");B.remove();const k=document.querySelector(".example-entry");k.remove();const H=[{strings:["poetry","pottery"],pattern:"po(et|tte)ry",preferBrackets:!0},{strings:["bookmaking","bookmarking"],pattern:"bookmar?king",preferBrackets:!0},{strings:["heart","hope"],pattern:"h(eart|ope)",preferBrackets:!0},{strings:["words","worlds"],pattern:"worl?ds",preferBrackets:!0},{strings:["cloud","cling"],pattern:"c(loud|ing)",preferBrackets:!0},{strings:["honeydew","drizzle"],pattern:"(honey)?d(ew|rizzle)",preferBrackets:!0},{strings:["heart","hearth"],pattern:"hearth?",preferBrackets:!0},{strings:["ðŸ’—ðŸ’œðŸ’™","ðŸ’—ðŸ’›ðŸ’™"],pattern:"ðŸ’—(ðŸ’œ|ðŸ’›)ðŸ’™",preferBrackets:!0}],T=document.querySelector(".examples-list");H.forEach(e=>{const{strings:a,pattern:r,preferBrackets:o}=e,n=k.cloneNode(!0),t=n.querySelector(".entry-strings");a.forEach(c=>{const i=document.createElement("div");i.classList.add("saved-string"),i.textContent=c,t.appendChild(i)});const l=n.querySelector(".entry-pattern");l.textContent=r,n.querySelector(".load-button").addEventListener("click",()=>O(r,a,o)),T.appendChild(n)});const I=document.querySelector(".output"),E=I.querySelector(".patterns"),j=document.querySelector(".switch-button");j.addEventListener("click",()=>{const e=Array.from(document.querySelectorAll(".string-input")),a=e.map(r=>r.value);a.length>=2&&(e[1].value=a[0],e[0].value=a[1]),y()});const w=document.querySelector(".add-button");w.addEventListener("click",()=>C());const N=document.querySelector(".clear-input-button");N.addEventListener("click",z);function C(){const e=document.querySelectorAll(".string-input-container"),a=document.querySelector(".string-input-container").cloneNode(!0),r=e.length+1,o=document.querySelector("button[type='submit']");o.innerHTML="Make a match set";const n=a.querySelector("label");n.setAttribute("for",`string${r}`),n.innerHTML=`String ${r}`;const t=a.querySelector("input");t.setAttribute("name",`string${r}`),t.setAttribute("id",`string${r}`),t.value="";const l=document.createElement("button");return a.appendChild(l),l.type="button",l.classList.add("remove-input-button"),l.innerHTML="Remove",l.addEventListener("click",()=>{a.remove();const u=document.querySelectorAll(".string-input-container");o.innerHTML=u.length>2?"Make a match set":"Make a match pair"}),e[e.length-1].insertAdjacentElement("afterend",a),a}function z(){document.querySelectorAll(".string-input").forEach(a=>a.value=""),E.classList.add("hidden")}const F=document.querySelectorAll("input[name='group']");F.forEach(e=>e.addEventListener("input",()=>{E.classList.contains("hidden")||y()}));const q=document.querySelector(".input-form");q.addEventListener("submit",e=>{e.preventDefault(),y()});const R=document.querySelectorAll(".save-button");R.forEach(e=>e.addEventListener("click",()=>{const a=e.closest(".pattern").querySelector("dd").textContent,r=Array.from(document.querySelectorAll(".string-input")).map(n=>n.value).filter(n=>n!==""),o=q.group.value==="brackets";X(a,r,o)}));const D=document.querySelector(".copy-button");D.addEventListener("click",Y);const K=document.querySelector(".clear-saved-button");K.addEventListener("click",_);function y(e,a){E.classList.remove("hidden");const r=Array.from(document.querySelectorAll(".string-input")),o=Array.from(new Set(r.map(h=>h.value).filter(h=>h!=="")));if(a!==void 0){const h=document.querySelector(`#group--${a?"brackets":"parentheses"}`);h.checked=!0}const n=q.group.value==="brackets",t=[],l=$(o,n);t.push(l);const u=document.querySelector("#pattern--middle");u.querySelector("dd").innerHTML=l;const c=m(o),i=document.querySelector("#pattern--alternation");t.includes(c)?i.classList.add("duplicate"):(i.classList.remove("duplicate"),t.push(c)),i.querySelector("dd").innerHTML=c;const s=A(o,n),d=document.querySelector("#pattern--begin-end");t.includes(s)?d.classList.add("duplicate"):(d.classList.remove("duplicate"),t.push(s)),d.querySelector("dd").innerHTML=s;const f=x(o,n),g=document.querySelector("#pattern--begin");t.includes(f)?g.classList.add("duplicate"):(g.classList.remove("duplicate"),t.push(f)),g.querySelector("dd").innerHTML=f;const S=M(o,n),v=document.querySelector("#pattern--end");t.includes(S)?v.classList.add("duplicate"):(v.classList.remove("duplicate"),t.push(S)),v.querySelector("dd").innerHTML=S}function X(e,a,r){const o=document.querySelector(".saved");o.classList.remove("hidden");const n=o.querySelector(".saved-list"),t=B.cloneNode(!0);t.setAttribute("data-group",r?"brackets":"parentheses"),n.appendChild(t);const l=t.querySelector(".entry-strings");a.forEach(s=>{const d=document.createElement("div");d.classList.add("saved-string"),d.innerHTML=s,l.appendChild(d)});const u=t.querySelector(".entry-pattern");u.innerHTML=e,t.querySelector(".load-button").addEventListener("click",()=>O(e,a,r)),t.querySelector(".remove-entry-button").addEventListener("click",()=>t.remove())}function O(e,a,r){const o=Array.from(document.querySelectorAll(".string-input-container"));if(o.length<a.length)for(let n=0;n<a.length-o.length;n++){const t=C();o.push(t)}else if(o.length>a.length)for(let n=o.length-1;n>a.length-1;n--)o[n].remove();for(let n=0;n<o.length;n++){const t=o[n].querySelector(".string-input");t.value=a[n]}y(e,r)}async function Y(){const a=Array.from(document.querySelectorAll(".entry-pattern")).map(r=>r.textContent).join(`
`);try{await navigator.clipboard.writeText(a),console.log("Copied to clipboard:",a)}catch(r){console.error("Couldn't copy text:",r)}}function _(){const e=document.querySelector(".saved-list");e.innerHTML=""}
